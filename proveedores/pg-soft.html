<!doctype html>
<html lang="es"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>PG Soft • Proveedor</title>
<meta name="description" content="Catálogo de juegos de PG Soft: slots, notas de RTP y más.">
<link rel="preload" href="../assets/providers/pgsoft.svg" as="image">
<style>
  :root{--bg:#0e0f13;--card:#161823;--ink:#e8eaf2;--muted:#aeb3c2;--chip:#232633;--brand:#ff5ea8;--accent:#6cf0d2;--radius:14px}
  body{margin:0;background:var(--bg);color:var(--ink);font:500 15px/1.5 ui-sans-serif,system-ui}
  .wrap{max-width:1100px;margin:auto;padding:28px}
  .hero{display:grid;grid-template-columns:88px 1fr;gap:14px;align-items:center;margin-bottom:18px}
  .logo{width:88px;height:88px;border-radius:12px;background:linear-gradient(135deg,var(--chip),transparent);display:grid;place-items:center;overflow:hidden}
  .logo img{width:100%;height:100%;object-fit:contain}
  h1{margin:0;font-size:26px}
  .muted{color:var(--muted)}
  .toolbar{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  input[type=search],select{padding:10px 12px;border-radius:10px;border:1px solid transparent;background:var(--chip);color:var(--ink)}
  .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  .chip{background:var(--chip);padding:6px 10px;border-radius:999px;cursor:pointer}
  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;margin-top:16px}
  .game{grid-column:span 12;background:var(--card);border-radius:var(--radius);padding:12px;display:grid;gap:8px}
  @media(min-width:720px){.game{grid-column:span 6}}
  @media(min-width:1080px){.game{grid-column:span 4}}
  .row{display:flex;justify-content:space-between;align-items:center;gap:10px}
  .tag{font-size:12px;background:var(--chip);padding:4px 8px;border-radius:999px;margin-right:6px}
  .btn{padding:8px 12px;border-radius:10px;border:1px solid transparent;background:var(--brand);color:#0b0c12;font-weight:700;text-decoration:none}
  .btn.ghost{background:transparent;border-color:var(--chip);color:var(--ink)}
  footer{margin-top:26px;font-size:13px;color:var(--muted)}
  .box{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-top:8px}
</style>
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"Organization",
  "name":"PG Soft",
  "url":"https://tu-dominio/proveedores/pg-soft.html",
  "logo":"https://tu-dominio/assets/providers/pgsoft.svg"
}
</script>
</head><body><div class="wrap">
  <nav><a href="../index.html" class="muted">← Volver</a></nav>
  <header class="hero">
    <div class="logo"><img src="../assets/providers/pgsoft.svg" alt="PG Soft"></div>
    <div>
      <h1>PG Soft</h1>
      <p class="muted">Slots móviles con arte pulido. Verificá licencias según tu región.</p>
      <div class="toolbar">
        <input id="q" type="search" placeholder="Buscar juego, tag, feature…">
        <select id="type">
          <option value="">Todos los tipos</option>
          <option value="slot">Slots</option>
          <option value="mesa">Mesa</option>
          <option value="live">Live</option>
          <option value="crash">Crash</option>
        </select>
        <select id="sort">
          <option value="az">A–Z</option>
          <option value="za">Z–A</option>
          <option value="rtp">RTP ↑</option>
          <option value="rtp_desc">RTP ↓</option>
        </select>
        <a class="btn ghost" href="#" id="clear">Limpiar</a>
      </div>
      <div class="chips">
        <span class="chip" data-f="buy-bonus">Buy-bonus</span>
        <span class="chip" data-f="jackpot">Jackpot</span>
        <span class="chip" data-f="provably_fair">Provably-fair</span>
        <span class="chip" data-f="mobile">Mobile</span>
      </div>
      <div class="box">
        <label>Monto a cargar ($): <input type="number" id="monto" min="1000" step="100"></label>
        <button class="btn" id="waBtn">Cargar por WhatsApp</button>
        <a class="btn ghost" href="../admin.html">Ir a Admin</a>
      </div>
    </div>
  </header>

  <section id="stats" class="muted"></section>
  <section id="grid" class="grid" aria-live="polite"></section>

  <footer>
    ⚠️ Mayores de 18. Juego responsable. RTP y disponibilidad pueden variar por operador/mercado. Este sitio no ofrece juego por dinero.
  </footer>
</div>

<div id="gate" style="position:fixed;inset:0;background:#0e0f13;display:grid;place-items:center;z-index:9999">
  <form id="login_form" style="background:#161823;padding:20px;border-radius:12px;min-width:280px;color:#e8eaf2">
    <h3 style="margin:0 0 10px">Ingresar</h3>
    <label>Usuario (ID)
      <input name="user_id" required style="width:100%;padding:10px;border-radius:8px;margin:6px 0">
    </label>
    <label>PIN
      <input name="pin" type="password" required minlength="4" style="width:100%;padding:10px;border-radius:8px;margin:6px 0">
    </label>
    <button style="width:100%;padding:10px;border-radius:8px;font-weight:700">Entrar</button>
    <p id="login_err" style="color:#f88"></p>
    <p class="muted">¿Olvidaste el PIN? Escribinos por WhatsApp.</p>
  </form>
</div>

<script src="../js/config.js"></script>
<script src="../js/auth.js"></script>
<script src="../js/wa.js"></script>
<script>
const $=s=>document.querySelector(s), $$=s=>[...document.querySelectorAll(s)];
const STATE={q:"",type:"",chips:new Set(),sort:"az"};
const slug="pg-soft"; 
let GAMES=[];

fetch(`../data/games/${slug}.json`).then(r=>r.json()).then(json=>{ GAMES=json.games||[]; render(); });

$("#q").addEventListener("input",e=>{STATE.q=e.target.value.toLowerCase().trim();render()});
$("#type").addEventListener("change",e=>{STATE.type=e.target.value;render()});
$("#sort").addEventListener("change",e=>{STATE.sort=e.target.value;render()});
$("#clear").addEventListener("click",e=>{e.preventDefault();STATE.q="";STATE.type="";STATE.chips.clear();$("#q").value="";$("#type").value="";$$(".chip").forEach(c=>c.classList.remove("on"));render()});
$$(".chip").forEach(c=>{c.addEventListener("click",()=>{const key=c.dataset.f;c.classList.toggle("on");c.classList.contains("on")?STATE.chips.add(key):STATE.chips.delete(key);render();})});

function applyFilters(list){
  const qOk = g=>{const t=(g.name+" "+(g.features||[]).join(" ")+" "+(g.tags||[]).join(" ")).toLowerCase();return !STATE.q || t.includes(STATE.q);};
  const typeOk = g=>!STATE.type || g.type===STATE.type;
  const chipsOk = g=>{ if(STATE.chips.size===0) return true; return [...STATE.chips].every(f=>{ if(f==="provably_fair") return !!g.provably_fair; if(f==="mobile") return !!g.mobile; return (g.features||[]).includes(f); }); };
  return list.filter(g=>qOk(g)&&typeOk(g)&&chipsOk(g));
}
function sortGames(list){
  if(STATE.sort==="az") return list.sort((a,b)=>a.name.localeCompare(b.name));
  if(STATE.sort==="za") return list.sort((a,b)=>b.name.localeCompare(a.name));
  if(STATE.sort==="rtp") return list.sort((a,b)=>(a.rtp||0)-(b.rtp||0));
  if(STATE.sort==="rtp_desc") return list.sort((a,b)=>(b.rtp||0)-(a.rtp||0));
  return list;
}
function card(g){
  const tags=[...(g.tags||[])].map(t=>`<span class="tag">${t}</span>`).join("");
  const feats=[...(g.features||[])].map(t=>`<span class="tag">${t}</span>`).join("");
  const pf=g.provably_fair?`<span class="tag">provably-fair</span>`:"";
  const mob=g.mobile?`<span class="tag">mobile</span>`:"";
  const rtp = g.rtp?`<span class="muted">RTP: ${g.rtp}%</span>`:"";
  const demo = g.demo_url?`<a class="btn" rel="nofollow noopener" target="_blank" href="${g.demo_url}">Demo</a>`:"";
  const trailer = g.trailer_url?`<a class="btn ghost" rel="nofollow noopener" target="_blank" href="${g.trailer_url}">Trailer</a>`:"";
  return `<article class="game"><div class="row"><strong>${g.name}</strong><span class="muted">${g.type}</span></div><div>${rtp}</div><div>${tags}${feats}${pf}${mob}</div><div class="row">${demo}${trailer}</div></article>`;
}
function render(){
  const filtered=applyFilters([...GAMES]);
  const sorted=sortGames(filtered);
  document.getElementById("grid").innerHTML = sorted.map(card).join("") || `<p class="muted">Sin resultados con los filtros actuales.</p>`;
  document.getElementById("stats").textContent = `${filtered.length} juego(s) encontrados`;
  const params=new URLSearchParams();
  if(STATE.q) params.set("q",STATE.q);
  if(STATE.type) params.set("type",STATE.type);
  if(STATE.sort!=="az") params.set("sort",STATE.sort);
  if(STATE.chips.size) params.set("f",[...STATE.chips].join(","));
  history.replaceState(null,"",params.toString()?`?${params}`:location.pathname);
}
// Init from URL
(function(){
  const p=new URLSearchParams(location.search);
  if(p.get("q")) {STATE.q=p.get("q"); $("#q").value=STATE.q;}
  if(p.get("type")) {STATE.type=p.get("type"); $("#type").value=STATE.type;}
  if(p.get("sort")) {STATE.sort=p.get("sort"); $("#sort").value=STATE.sort;}
  if(p.get("f")) {p.get("f").split(",").forEach(k=>{STATE.chips.add(k); const el=document.querySelector(`.chip[data-f="${k}"]`); if(el) el.classList.add("on");});}
})();

document.getElementById('waBtn').onclick = ()=>{
  const amount = Number(document.getElementById('monto').value||0);
  window.openWAWithDeposit(amount);
};
</script>
</body></html>
